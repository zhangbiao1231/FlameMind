## FlameMind🔥（燃机火焰预测）
### 项目结构
1. 数据文件data
2. 模型文件models
3. 输出文件runs
4. 辅助程序utils
5. 主程序
- 5.1 训练train
- 5.2 验证val
- 5.3 推理 predict
-------------------------------------------------------------
#### #===============jupter调试情况=================#
1. 数据集 
- 1.1 **（batch_size=32，num_steps=10，dims=5）**
- 1.2 训练集 9条
- 1.3 验证集 2条
- 1.4 测试集 2条
2. 预测模型
- 2.1 Seq2Seq（序列到序列） 
- 2.2 循环层：GRU (num_inputs=5, num_hiddens=32, num_layers=2)
- 2.3 加性注意力机制
- 2.4 强制教学
3. 推理模块
- 3.1 缓冲机制
- 3.2 预热
- 3.3 0启动
- 3.4 自回归预测
4. 专利技术
- 4.1 *《基于注意力机制的重型燃气轮机燃烧室火焰强度预测模型》*
- 4.2 *《一种重型燃气轮机燃烧室实时火焰推理模型》*
-------------------------------------------------------------
#### #===============PyCharm开发=================#
- 开发计划

| 日期                   | 开发任务   | 开发周期 |
|----------------------|-----------|-----|
| **04/27** -**04/27** | 数据模块，模型模块 | 1day |
| **04/28** -**04/28** | 辅助函数、主函数  | 1day |
| **04/29** -**04/29** | 模型训练、推理   | 1day |
| **04/30** -**04/30** | 模型训练、推理   | 1day |
| **05/01** -**05/01** | 编制技术报告    | 1day |
-------------------------------------------------------------
- Date: 04/21 
- [x] work: dataProcess.py -> *src_folder*&& *tgt_folder*
- [x] We have select important features in xx_final.csv i.e. 1112_final.csv
-------------------------------------------------------------
- Date: 04/27
- [x] 训练集/测试集/测试集 total：13， 7/3/3 
- [x] 读取tgt_folder文件夹中csv文件，指定训练-验证-测试比例，随机复制csv文件
- [x] 顺序数据分区/随机数据分区辅助函数
- [x] 按序列标准化/随机拼接
- [x] 迭代器测试 train_iter/valid_iter
-------------------------------------------------------------
- Date: 04/28
- [x] attention模块
- [x] rnn_layer模块
- [x] 支持定制化调用rnn/gru/lstm
- [x] 模型测试
-------------------------------------------------------------
- Date: 05/06
- [ ] 问题： 编码器解码器 LSTM不可用🚫
- [x]顺序分区下，tqdm显示刷屏
-------------------------------------------------------------
- Date: 05/07
- [x] train/val 函数整理
-------------------------------------------------------------

- Date: 06/04
- [x] 横琴数据预处理
![横琴数据](HengQin.png)
- $\Delta T = T2-T1$ ;
- rpm; 
- flame intensity = $f_i$= $\frac{1}{N}\sum^{N}_{1} f_i$; 
- H_amp = $\frac{H_1+H_2}{2}$
- M_amp = $\frac{M_1+M_2}{2}$
- L_amp = $\frac{L_1+L_2}{2}$
- we get $n \times d$ dataSets, where $d = 5$ .
- 2*.png 8*启动.csv 9*停机.csv

-------------------------------------------------------------

- Date: 06/16
- [x] 横琴数据问题： 压力脉动不明显，导致推理效果不佳
- [] 原始数据推理精度较高 测试集上：单步还是多步都可以实现99.5%以上
- 99.73% date:0119 单步0启动
- ![img.png](img.png)  单步0启动
- 99.54% data:0313 单步0启动
- ![img_1.png](img_1.png)  

- Date: 06/18
- [x] 技术报告
- 
- Date: 06/19-06/20
- [x] 修改保存model逻辑
- [x] 优化predict函数
- [x] 批量读取数据；批量生成预测数据;批量画图 
- （python predict.py --source datasets/Hengqin_target_data
                      --project hengqin_inference_cls )
- [] 统计延迟时间$\delta t$, 修改损失函数



- 06/20 横琴技术交流会
----
```
 提供20条数据
 压力脉动无问题
 提供了限定范围（(2,4)   # 8
 (3,4),(3,4),(3,4),   # 10，12，14
 (0.3,0.5),(0.3,0.5)）# 16，18
```
> 需要重新设计脉动特征
> 统计延迟时间$\delta t$, 修改损失函数loss.py
---
- Date: 06/30
- setup.py
- README.md
------
## 0908
```
- 根据新数据限定范围重新制作数据集
（(2,4)   # 8
 (3,4),(3,4),(3,4),   # 10，12，14
 (0.3,0.5),(0.3,0.5)）# 16，18
-- utils/*
- finetune（-- weights .../exp18 --pretrained True）
- val/ predict
- modify README.md
- push to git 
```

- train-cls
- exp18 原始权重

- train-cls-hengqin
- exp 重新训练
- exp2 微调

- inference-cls-hengqin
- exp {exp18测试}
- exp2 {exp重新训练} ✅
- exp3 {exp2微调}


  
